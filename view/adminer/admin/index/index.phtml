<?php
/**
 * @var \Laminas\View\Renderer\PhpRenderer $this
 * @var array $dbConfig
 */

$translate = $this->plugin('translate');
$hyperlink = $this->plugin('hyperlink');
$url = $this->plugin('url');

$this->htmlElement('body');
echo $this->pageTitle($this->translate('Adminer database manager'));
?>

<strong><?= $translate('WARNING') ?></strong>
<p><?= $translate('Use it at your own risk.') ?></p>
<p><?= $translate('It is highly recommended to use a read-only user to access database, because it’s very easy to break a database, even for people who know the Omeka code and all the modules perfectly.') ?></p>
<p><?= $translate('In all cases, it’s always recommended to backup your files and your databases automatically and before risky and non-risky commands, and to check your archives regularly, so you can roll back if needed.') ?></p>
<p>
<?php
if ($dbConfig['default_user_name'] === '' || $dbConfig['default_user_password'] === ''):
    echo $translate('Read-only user is not defined.');
else:
    $query = [
        'server' => $dbConfig['server'],
        'db' => $dbConfig['db'],
        'username' => $dbConfig['default_user_name'],
        'password' => $dbConfig['default_user_password'],
    ];
    echo $hyperlink($translate('Read-only access (simple interface)'), $url('admin/adminer-editor-mysql', [], ['query' => $query]), ['target' => '_blank']);
    echo '<br/>';
    echo $hyperlink($translate('Read-only access (full interface)'), $url('admin/adminer-mysql', [], ['query' => $query]), ['target' => '_blank']);
    echo '<br/>';

    if ($dbConfig['main_user_name'] === '' || $dbConfig['main_user_password'] === ''):
        echo $translate('Full-access user is not defined.');
    else:
        $query = [
            'server' => $dbConfig['server'],
            'db' => $dbConfig['db'],
            'username' => $dbConfig['main_user_name'],
            'password' => $dbConfig['main_user_password'],
        ];
        echo $hyperlink($translate('Full access (simple interface)'), $url('admin/adminer-editor-mysql', [], ['query' => $query]), ['target' => '_blank']);
        echo '<br/>';
        echo $hyperlink($translate('Full access (full interface)'), $url('admin/adminer-mysql', [], ['query' => $query]), ['target' => '_blank']);
    endif;
endif;
?>
</p>
